# Copyright 2023 Google Inc.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- !ruby/object:Api::Resource
name: 'BackupPlan'
min_version: beta
base_url: projects/{{project}}/locations/{{location}}/backupPlans
create_url: projects/{{project}}/locations/{{location}}/backupPlans/?backup_plan_id={{backup_plan_id}}
self_link: projects/{{project}}/locations/{{location}}/backupPlans/{{backup_plan_id}}
create_verb: :POST
immutable: true
delete_url: projects/{{project}}/locations/{{location}}/backupPlans/{{backup_plan_id}}
description: A Backup and DR BackupPlan.
references: !ruby/object:Api::Resource::ReferenceLinks
  guides:
    'Official Documentation': 'https://cloud.google.com/backup-disaster-recovery/docs'
  api: 'https://cloud.google.com/backup-disaster-recovery/docs/deployment/deployment-plan'
autogen_async: true
timeouts: !ruby/object:Api::Timeouts
  insert_minutes: 20
  delete_minutes: 20
examples:
  - !ruby/object:Provider::Terraform::Examples
    min_version: beta
    name: 'backup_dr_backup_plan'
    primary_resource_id: 'bp1'
    vars:
      backup_vault_name: 'bv1'
      backup_plan_name: 'bp1'
      backup_rule_name: 'rule-1'
      backup_retention_days: 5
      recurrence_type: 'HOURLY'
      hourly_frequency: 6
      time_zone: "UTC"
      start_hour_of_day: 5
      end_hour_of_day: 20
    test_env_vars:
      project: :PROJECT_NAME
    skip_test: true
parameters:
  - !ruby/object:Api::Type::String
    name: 'location'
    required: true
    url_param_only: true
    description: |
      The location for the backup plan
  - !ruby/object:Api::Type::String
    name: 'backup_plan_id'
    required: true
    url_param_only: true
    description: |-
      The ID of the backup plan
properties:
  - !ruby/object:Api::Type::String
    name: 'name'
    description: |
      The name of backup plan resource created
    output: true
  - !ruby/object:Api::Type::String
    name: 'description'
    description: |
      The description allows for additional details about `BackupPlan` and its use cases to be provided.
  - !ruby/object:Api::Type::String
    name: 'backupVault'
    description: |
      Resource name of the backup vault which will be used as storage location for backups. Format: projects/{project}/locations/{location}/backupVaults/{backupvault}
    required: true
  - !ruby/object:Api::Type::String
    name: 'backupVaultServiceAccount'
    description: |
      The Google Cloud Platform Service Account to be used by the BackupVault for taking backups.
    output: true
  - !ruby/object:Api::Type::String
    name: 'resourceType'
    description: |
      The resource type to which the `BackupPlan` will be applied. Examples include, "compute.googleapis.com/Instance" and "storage.googleapis.com/Bucket".
    required: true
  - !ruby/object:Api::Type::String
    name: 'createTime'
    description: |
      When the `BackupPlan` was created.
    output: true
  - !ruby/object:Api::Type::String
    name: 'updateTime'
    description: |
      When the `BackupPlan` was last updated.
    output: true
  - !ruby/object:Api::Type::Array
    name: 'backupRules'
    description: |
      The backup rules for this `BackupPlan`. There must be at least one `BackupRule` message.
    required: true
    item_type: !ruby/object:Api::Type::NestedObject
      properties:
        - !ruby/object:Api::Type::String
          name: 'ruleId'
          description: The unique ID of this `BackupRule`. The `rule_id` is unique per `BackupPlan`.
          required: true
        - !ruby/object:Api::Type::Integer
          name: 'backupRetentionDays'
          description: |
            Configures the duration for which backup data will be kept. The value should be greater than or equal to minimum enforced retention of the backup vault.
          required: true
        - !ruby/object:Api::Type::NestedObject
          name: 'standardSchedule'
          description: StandardSchedule defines a schedule that runs within the confines of a defined window of days.
          required: true
          properties:
            - !ruby/object:Api::Type::Enum
              name: 'recurrenceType'
              description: RecurrenceType enumerates the applicable periodicity for the schedule.
              values:
                - :HOURLY
                - :DAILY
                - :WEEKLY
                - :MONTHLY
                - :YEARLY
              required: true
            - !ruby/object:Api::Type::Integer
              name: 'hourlyFrequency'
              description: |
                Specifies frequency for hourly backups. An hourly frequency of 2 means jobs will run every 2 hours from start time till end time defined.
                This is required for `recurrence_type`, `HOURLY` and is not applicable otherwise.
            - !ruby/object:Api::Type::Array
              name: 'daysOfWeek'
              description: 'Specifies days of week like MONDAY or TUESDAY, on which jobs will run. This is required for `recurrence_type`, `WEEKLY` and is not applicable otherwise.'
              item_type: !ruby/object:Api::Type::Enum
                name: 'DayOfWeekEnum'
                description: 'Specifies day of week'
                values:
                  - :DAY_OF_WEEK_UNSPECIFIED
                  - :MONDAY
                  - :TUESDAY
                  - :WEDNESDAY
                  - :THURSDAY
                  - :FRIDAY
                  - :SATURDAY
            - !ruby/object:Api::Type::Array
              name: 'daysOfMonth'
              description: 'Specifies days of months like 1, 5, or 14 on which jobs will run.'
              item_type: Api::Type::Integer
            - !ruby/object:Api::Type::NestedObject
              name: 'weekDayOfMonth'
              description: 'Specifies a week day of the month like FIRST SUNDAY or LAST MONDAY, on which jobs will run.'
              properties:
                - !ruby/object:Api::Type::Enum
                  name: 'weekOfMonth'
                  description: 'WeekOfMonth enumerates possible weeks in the month, e.g. the first, third, or last week of the month.'
                  values:
                    - :WEEK_OF_MONTH_UNSPECIFIED
                    - :FIRST
                    - :SECOND
                    - :THIRD
                    - :FOURTH
                    - :LAST
                  required: true
                - !ruby/object:Api::Type::Enum
                  name: 'dayOfWeek'
                  description: 'Specifies the day of the week.'
                  values:
                    - :DAY_OF_WEEK_UNSPECIFIED
                    - :MONDAY
                    - :TUESDAY
                    - :WEDNESDAY
                    - :THURSDAY
                    - :FRIDAY
                    - :SATURDAY
                    - :SUNDAY
                  required: true
            - !ruby/object:Api::Type::Array
              name: 'months'
              description: 'Specifies values of months'
              item_type: !ruby/object:Api::Type::Enum
                name: 'monthvalues'
                description: 'Specifies the months of the year, like `FEBRUARY` and/or `MAY`, on which jobs will run.'
                values:
                  - :MONTH_UNSPECIFIED
                  - :JANUARY
                  - :FEBRUARY
                  - :MARCH
                  - :APRIL
                  - :MAY
                  - :JUNE
                  - :JULY
                  - :AUGUST
                  - :SEPTEMBER
                  - :OCTOBER
                  - :NOVEMBER
                  - :DECEMBER
            - !ruby/object:Api::Type::String
              name: timeZone
              description: The time zone to be used when interpreting the schedule.
              required: true
            - !ruby/object:Api::Type::NestedObject
              name: 'backupWindow'
              description: |
                A BackupWindow defines the window of the day during which backup jobs will run. Jobs are queued at the beginning of the window and will be marked as
                `NOT_RUN` if they do not start by the end of the window.
              properties:
                - !ruby/object:Api::Type::Integer
                  name: 'startHourOfDay'
                  description: |
                    The hour of the day (0-23) when the window starts, for example, if the value of the start hour of the day is 6, that means the backup window starts at 6:00.
                  required: true
                - !ruby/object:Api::Type::Integer
                  name: 'endHourOfDay'
                  description: |
                    The hour of the day (1-24) when the window ends, for example, if the value of end hour of the day is 10, that means the backup window end time is 10:00.
                    The end hour of the day should be greater than the start
